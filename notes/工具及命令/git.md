# git

## 配置

`git config --list`查看所有配置

## 三种状态 三个阶段

git中的文件有三种状态 ，已修改、已暂存、已提交，分别对应三个阶段，使用者在**工作区**进行修改，然后选择修改过的文件进入**暂存区**，暂存区保存了下次需要提交的文件列表，最后**commit**把暂存区的文件保存到Git仓库。

## .gitignore 的格式规范如下

- 所有空行或者以 # 开头的行都会被 Git 忽略。

- 可以使用标准的 glob 模式匹配，它会递归地应用在整个工作区中。

- 匹配模式可以以（/）开头防止递归。

- 匹配模式可以以（/）结尾指定目录。

- 要忽略指定模式以外的文件或目录，可以在模式前加上叹号（!）取反。

所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。 星号（*）匹配零个或多个任意字符；`[abc]` 匹配任何一个列在方括号中的字符 （这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）； 问号（?）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符， 表示所有在这两个字符范围内的都可以匹配（比如 `[0-9]` 表示匹配所有 0 到 9 的数字）。 使用两个星号（\*\*）表示匹配任意中间目录，比如 a/\*\*/z 可以匹配 a/z 、 a/b/z 或 a/b/c/z 等。

```env
# 忽略所有的 .a 文件
*.a

# 但跟踪所有的 lib.a，即便你在前面忽略了 .a 文件
!lib.a

# 只忽略当前目录下的 TODO 文件，而不忽略 subdir/TODO
/TODO

# 忽略任何目录下名为 build 的文件夹
build/

# 忽略 doc/notes.txt，但不忽略 doc/server/arch.txt
doc/*.txt

# 忽略 doc/ 目录及其所有子目录下的 .pdf 文件
doc/**/
*.pdf
```

## 移除文件git rm

普通的删除一个文件后，还需要把操作保存到暂存区才能被git记录，使用`git rm`命令可以同时做到这两件事情。
如果要删除之前已经修改过或者已经放到暂存区的文件，则需要在命令后面加上`-f`（即force）。
还有一种情况是，需要把文件在**Git仓库**中删除，但仍保留在工作区中（当忘记添加.gitignore时很有用），使用`--cached`选项

```bash
git rm --cached filename
```

git rm 命令后面可以列出文件或者目录的名字，也可以使用 glob 模式。

## 撤销

`git commit --amend` 命令可以撤销上一次提交，并且可以修改提交的信息。

`git reset HEAD <file>`取消暂存的文件

`git checkout -- CONTRIBUTING.md`**谨慎使用**撤销对文件的修改，文件在本地的任何修改都会消失，

## 分支

`git branch` 后面跟名字创建分支，不跟名字列出分支列表
`git checkout` 切换分支
`git checkout -b <newbranchname>`创建并切换
`git branch -d hotfix` 删除分支
`git merge hotfix` 合并分支
